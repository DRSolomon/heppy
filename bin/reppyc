#!/usr/bin/env python

from pprint import pprint

from reppy import Args
from reppy import Client
from reppy import Request
from reppy import Response

data = Args.parse()

try:
    request = Request.build(data['command'], data)
    xml = request.toprettyxml()
    client = Client.Client(data['path'])
    res = client.command(xml)
    print res
    response = Response.build(data['command'], res)
    pprint(response.data)
except (KeyError):
    exit(1)

